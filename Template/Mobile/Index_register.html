<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta content="yes" name="apple-mobile-web-app-capable">
		<meta content="yes" name="apple-touch-fullscreen">
		<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
		<meta content="telephone=no,email=no" name="format-detection">
		<title>注册</title>
		<link rel="stylesheet" type="text/css" href="/Public/Mobile//css/logon.css" />
		<link rel="stylesheet" type="text/css" href="/Public/Mobile/font-awesome-4.7.0/css/font-awesome.min.css" />
		<link rel="stylesheet" type="text/css" href="/Public/Mobile/css/animate.css"/>
		<script src="/Public/Mobile/js/flexible.js"></script>
	</head>

	<body>
		<div class="banner">
			<img src="/Public/Mobile/img/lo.jpg" />
		</div>
		<div class="register_tab">
			<span>小莺出国账号注册 <i></i></span>
			<!--	<span>邮箱注册 <i></i></span>-->
		</div>
		<div class="z_login">
			<div class="sign_in_form xy_form">
				<div class="CRM_TEMPLET" data-templet="CRM_TEMPLET_XY_a02" style="display: none;">
					<p class="_prev_dom">
						<i class="fa fa-phone fa-lg"></i>
						<span class="_sel"><span id="interCode">+86</span><i class="fa fa-angle-down fa-lg"></i></span>
						<input style="margin-left: 0;" type="text" id="p_username" placeholder="">
					</p>

				</div>
				<div class="CRM_TEMPLET" data-templet="CRM_TEMPLET_XY_c03" style="display: none;">
					<p class="_next_dom _pass"><i class="_key"><img src="/Public/Mobile/img/password.png"/></i><input type="password" id="p_password" placeholder=""></p>

				</div>
				<div class="CRM_TEMPLET" data-templet="CRM_TEMPLET_XY_c02" style="display: none;">
					<p class="_phone _prev_dom"><i class="fa fa-sort-numeric-asc fa-lg"></i><input type="text"  placeholder=""> <button class="code_but">获取验证码</button></p>
					<div class="sign_in_next _prev_dom">下一步</div>

					<div class="sign_up_but _prev_dom">
						已有账号？
						<a href="/m/login">登录</a>
					</div>
				</div>
			</div>
			<p class="confirm  _next_dom"><i class="_key"><img src="/Public/Mobile/img/password.png"/></i><input type="password" name="22" placeholder="确认密码"></p>
			<div class=" xy_submit _next_dom">注册</div>
			<div class="sign_up_but _next_dom">
				已有账号？
				<a href="/m/login">登录</a>
			</div>
		</div>
		<!--<div class="e_login">
			<div class="sign_in_form2 xy_form">
				<div class="CRM_TEMPLET" data-templet="CRM_TEMPLET_XY_b02" style="display: none;">
					<p class="_prev_dom"><i class="fa fa-envelope-o fa-lg"></i><input type="text" id="" placeholder=""></p>
				</div>
				
				<div class="CRM_TEMPLET" data-templet="CRM_TEMPLET_XY_c03" style="display: none;">
					<p class="_pass _next_dom"><i class="_key"><img src="/Public/Mobile/img/password.png"/></i><input type="text" id="" placeholder=""></p>

				</div>
				<div class="CRM_TEMPLET" data-templet="CRM_TEMPLET_XY_c02" style="display: none;">
					<p class="_phone _prev_dom"><i class="fa fa-sort-numeric-asc fa-lg"></i><input type="text" id="" placeholder=""> <button class="code_but">获取验证码</button></p>
					<div class="sign_in_next _prev_dom">下一步</div>

					<div class="sign_up_but _prev_dom">
						已有账号？
						<a href="/m/login">登录</a>
					</div>
				</div>
			</div>
			<p class="confirm _next_dom"><i class="_key"><img src="/Public/Mobile/img/password.png"/></i><input type="text" name="22" id="" placeholder="确认密码"></p>
			<div class="xy_submit _next_dom">注册</div>
			<div class="sign_up_but _next_dom">
				已有账号？
				<a href="/m/login">登录</a>
			</div>
		</div>-->
		<div class="fixed_sel">
			<div class="animated zoomIn">
			<ul >
				<p>如没有您所处的国家和地区，请联系我们的客服人员</p>
				<li value="中国大陆 +86">中国大陆 +86</li>
				<li value="中国香港  +852">中国香港 +852</li>
				<li value="中国澳门 +853">中国澳门 +853</li>
				<li value="中国台湾 +886">中国台湾 +886</li>
				<li value="日本 +81">日本 +81</li>
				<li value="韩国 +82">韩国 +82</li>
				<li value="美国 +1">美国/加拿大 +1</li>
				<li value="英国 +44">英国 +44</li>
				<li value="法国 +33">法国 +33</li>
				<li value="德国 +49">德国 +49</li>
				<li value="意大利 +39">意大利 +39</li>
				<li value="俄罗斯 +7">俄罗斯 +7</li>
				<li value="西班牙 +34">西班牙 +34</li>
				<li value="葡萄牙 +351">葡萄牙 +351</li>
				<li value="澳大利亚 +61">澳大利亚 +61</li>
				<li value="新西兰 +64">新西兰 +64</li>
				<li value="新加坡 +65">新加坡 +65</li>
				<li value="马来西亚 +60">马来西亚 +60</li>
				<li value="瑞典 +46">瑞典 +46</li>
			</ul>
			<span class="_close"><img src="/Public/Mobile/img/layer_close.png"/></span>
			</div>
			
		</div>
	</body>
	<script src="/Public/Mobile/js/jquery-3.1.1.min.js"></script>
	<script src="/Public/Mobile/js/jquery.cookie.js"></script>
	<script src="/Public/Mobile/js/xiaoying_form.js"></script>
	<script>
		$(document).on('change', '#_sel', function() {
			for(var i = 0; i < $("#_sel>option").length; i++) {
				$("#_sel>option").eq(i).text($("#_sel>option").eq(i).attr("value"))
			}
			var _opt = $(this).find("option:selected").text()
			$(this).find("option:selected").text("+" + _opt.split("+")[1])
		})

		function _focus() {
			$(".sign_in_form input").focus(function() {
				$(".sign_in_form>p").removeClass("active_focus")
				$(this).parent().addClass("active_focus")
			}).blur(function() {
				$(".sign_in_form>p").removeClass("active_focus")
				$(this).parent().addClass("active_focus")
			})
		}

		$(".sign_in_form").xiaoyingForm({
			parameter: [{
					errorMes: "电话格式不正确",
					id: "XY_a02",
					rename: "电话",
					reg: "required",
					placeholder: "请输入您的电话"
				},
				{
					errorMes: "验证码格式不正确",
					id: "XY_c02",
					reg: "required"
				},
				{
					errorMes: "密码格式不正确",
					id: "XY_c03",
					reg: "required"
				},
			],
			sendMes: ".code_but",
			submitBtn: ".sign_in_but",
			beforeSendData: function(_data, cb) {
			_data["XY_b35"] = $("#interCode").text().split('+')[1]
			_data["XY_a01"] = "网站注册用户"
			_data["XY_c01"] = "register-student_end"
				cb(_data);
			},
			beforeLoadField: function(res) {
				return res;
			},
			afterLoadField: function() {
				_focus()
			},
			validatorError: function(mes, node) {
				alert(mes);
			},
			submitSuccess: function() {
				// alert("申请成功！请等到老师与您联系");
				$.ajax({
					type:"post",
					data: {
						username: $("#p_username").val(),
						password: $("#p_password").val()
					},
					dataType:"json",
					url: "/api/login",
					success:function(res){
						if(res.result) {
							window.location.href = "/m"
						} 
// 						else {
// 							forget()
// 							$(".remember>i>img").attr("src","/Public/Mobile/img/k.png")
							console.log(res.msg)
// 						}
					}
				})
			},
			submitError: function() {}
		});

		//				$(".sign_in_form2").xiaoyingForm({
		//			parameter: [{
		//					errorMes: "邮箱格式不正确",
		//					id: "XY_b02",
		//					rename: "邮箱",
		//					reg: "required",
		//					placeholder: "请输入您的邮箱"
		//				},
		//				{
		//					errorMes: "验证码格式不正确",
		//					id: "XY_c02",
		//					reg: "required"
		//				},
		//				{
		//					errorMes: "密码",
		//					id: "XY_c03",
		//					reg: "required"
		//				},
		//			],
		//			sendMes: ".code_but2",
		//			submitBtn: ".sign_in_but2",
		//			beforeSendData: function(_data, cb) {
		//				cb(_data);
		//			},
		//			beforeLoadField: function(res) {
		//				return res;
		//			},
		//			afterLoadField: function() {
		//				_focus()
		//			},
		//			validatorError: function(mes, node) {
		//				alert(mes);
		//			},
		//			submitSuccess: function() {
		//				alert("申请成功！请等到老师与您联系");
		//			},
		//			submitError: function() {}
		//		});

		$(".xy_submit").click(function() {
			var pass = $(this).parent().find(".confirm input").val();
			var confirm_pass = $(this).parent().find("._pass").val()
			if(pass == "" && confirm_pass == "") {
				$(this).removeClass("sign_in_but")
				alert("密码不能为空！")
			}
		})

		$(".confirm input").blur(function() {
			var pass = $(this).parent().parent().find("._pass>input").val()
			var confirm_pass = $(this).val()
			if(pass != "" && confirm_pass != "" && pass != confirm_pass) {
				alert("两次输入密码不同！")
			} else if(pass == confirm_pass) {
				$(this).parent().parent().find(".xy_submit").addClass("sign_in_but")
			}
		})

		$(".z_login").on("click", ".sign_in_next", function() {
			$(this).parent().parent().find("._prev_dom").hide();
			$(this).parent().parent().find("._next_dom").fadeIn('fast');
		})

		$(".e_login").on("click", ".sign_in_next", function() {
			$(this).parent().parent().find(" ._prev_dom").hide();
			$(this).parent().parent().find("._next_dom").fadeIn('fast');
		})

		//		$(".register_tab>span").click(function(){
		//			if(!$(this).hasClass("active_tab")){
		//				$(" ._prev_dom").show();
		//				$(" ._next_dom").hide();
		//				$(".register_tab>span").removeClass()
		//				$(".e_login,.z_login").hide()
		//				$(this).addClass("active_tab")
		//				if($(this).index() == 0){
		//					$(".z_login").fadeIn("fast")
		//				}else{
		//					$(".e_login").fadeIn("fast")
		//				}
		//			}
		//		})
		
		$(document).on("click","._sel",function(){
			$(".fixed_sel").addClass("fixed_show");
			$(".fixed_sel>div").addClass("zoomIn")
		})
		
		$(".fixed_sel").click(function(){
			$(this).fadeOut("fast")
			$(".fixed_sel>div").removeClass("zoomIn")
			$(".fixed_sel").removeClass("fixed_show")
		})
		
		$(".fixed_sel li").click(function(){
			console.log($(this).text().split("+")[1])
			$("._sel>span").text("+"+$(this).text().split("+")[1])
			$(".fixed_sel>div").removeClass("zoomIn")
			$(".fixed_sel").removeClass("fixed_show")
		})
	</script>

	<include file="./Template/Mobile/index_leftslider.html" />
</html>